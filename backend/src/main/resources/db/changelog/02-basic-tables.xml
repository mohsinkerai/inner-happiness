<?xml version="1.0" encoding="utf-8" ?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

  <changeSet id="02-01" author="mohsin.kerai">
    <createTable tableName="position_on_institution"
      remarks="A table to store active position w.r.t level, lets say President Exist in National Council and Chairman in Health Board">
      <column name="id" type="bigint" autoIncrement="true">
        <constraints nullable="false" unique="true" primaryKey="true"/>
      </column>
      <column name="position_id" type="bigint">
        <constraints nullable="true"/>
      </column>
      <column name="institution_id" type="bigint">
        <constraints nullable="true"/>
      </column>
      <column name="min_count" type="int">
        <constraints nullable="true"/>
      </column>
      <column name="desired" type="int">
        <constraints nullable="true"/>
      </column>
      <column name="max_count" type="int">
        <constraints nullable="true"/>
      </column>
      <column name="nominations" type="int">
        <constraints nullable="true"/>
      </column>
      <column name="is_active" type="bit" defaultValue="true">
        <constraints nullable="false"/>
      </column>
      <column name="created_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="updated_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="created_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
      <column name="updated_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
    </createTable>
    <insert tableName="position_on_institution">
      <column name="id" value="1"/>
      <column name="position_id" value="1"/> <!-- President -->
      <column name="institution_id" value="1"/> <!-- National Council -->
      <column name="min_count" value="1"/> <!-- National Council -->
      <column name="max_count" value="1"/> <!-- National Council -->
      <column name="nominations" value="1"/> <!-- National Council -->
      <column name="desired" value="1"/> <!-- National Council -->
    </insert>
  </changeSet>
  <changeSet id="02-02" author="mohsin.kerai">
    <createTable tableName="person"
      remarks="A Person in the real world, i.e. Mohsin Kerai or Zeeshan Damani">
      <column name="id" type="bigint" autoIncrement="true">
        <constraints nullable="false" unique="true" primaryKey="true"/>
      </column>

      <column name="cnic" type="varchar(255)">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="passport_number" type="varchar(255)">
        <constraints nullable="true" unique="false"/>
      </column>
      <column name="image" type="MEDIUMTEXT">
        <constraints nullable="true" unique="false"/>
      </column>

      <column name="salutation" type="bigint">
        <constraints nullable="true"/>
      </column>
      <column name="first_name" type="varchar(100)">
        <constraints nullable="false"/>
      </column>
      <column name="fathers_name" type="varchar(100)">
        <constraints nullable="true"/>
      </column>
      <column name="family_name" type="varchar(100)">
        <constraints nullable="true"/>
      </column>

      <column name="jamati_title" type="bigint">
        <constraints nullable="true"/>
      </column>
      <column name="gender" type="int">
        <constraints nullable="false"/>
      </column>
      <column name="date_of_birth" type="timestamp">
        <constraints nullable="true"/>
      </column>
      <column name="residential_address" type="text">
        <constraints nullable="true"/>
      </column>
      <column name="city" type="bigint">
        <constraints nullable="true"/>
      </column>
      <column name="residence_telephone" type="varchar(100)">
        <constraints nullable="true"/>
      </column>
      <column name="mobile_phone" type="varchar(100)">
        <constraints nullable="true"/>
      </column>
      <column name="email_address" type="varchar(100)">
        <constraints nullable="true"/>
      </column>

      <column name="marital_status" type="bigint">
        <constraints nullable="true"/>
      </column>
      <column name="area_of_origin" type="bigint">
        <constraints nullable="true"/>
      </column>

      <column name="regional_council" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="local_council" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="jamatkhana" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="plan_to_relocate" type="tinyint">
        <constraints nullable="false"/>
      </column>
      <column name="relocate_location" type="varchar(255)">
        <constraints nullable="true"/>
      </column>
      <column name="relocation_date_time" type="timestamp">
        <constraints nullable="true"/>
      </column>

      <column name="highest_level_of_study" type="varchar(255)">
        <constraints nullable="true"/>
      </column>
      <column name="highest_level_of_study_other" type="varchar(255)">
        <constraints nullable="true"/>
      </column>

      <column name="educations" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="akdn_trainings" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="professional_trainings" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="skills" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="professional_memberships" type="json">
        <constraints nullable="true"/>
      </column>

      <column name="language_proficiencies" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="voluntary_community_services" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="voluntary_public_services" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="willingness_to_devote_time_in_future" type="varchar(255)">
        <constraints nullable="true"/>
      </column>
      <column name="field_of_interest" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="hours_per_week" type="bigint">
        <constraints nullable="true"/>
      </column>
      <!--Actual Occupation, Salried, Self Employed-->
      <column name="occupation_type" type="bigint">
        <constraints nullable="true"/>
      </column>
      <column name="occupation_others" type="varchar(255)">
        <constraints nullable="true"/>
      </column>
      <column name="employments" type="json">
        <constraints nullable="true"/>
      </column>
      <column name="field_of_expertise" type="varchar(255)">
        <constraints nullable="true"/>
      </column>
      <column name="religious_education" type="bigint">
        <constraints nullable="true"/>
      </column>

      <column name="created_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="updated_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="created_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
      <column name="updated_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="02-03" author="mohsin.kerai">
    <insert tableName="person">
      <column name="id" value="2"/>

      <column name="cnic" value="42101-1111111-2"/>
      <column name="image" value="42101-1111111-2.png" />

      <column name="salutation" value="1" />
      <column name="first_name" value="Mohsin"/>
      <column name="fathers_name" value="Mansoor"/>
      <column name="family_name" value="Kerai"/>

      <column name="jamati_title" value="1"/>
      <column name="gender" value="0"/>
      <column name="date_of_birth" value="1993-07-27"/>
      <column name="city" value="1"/>
      <column name="marital_status" value="single"/>
      <column name="residential_address" value="Flat # DD-108 Karimabad Colony Block 3 FB Area Karachi"/>
      <column name="mobile_phone" value="03312338554"/>
      <column name="email_address" value="mohsin.kerai@gmail.com"/>
      <column name="marital_status" value="1"/>
      <column name="area_of_origin" value="1"/>
      <column name="regional_council" value="2"/>
      <column name="local_council" value="3"/>
      <column name="jamatkhana" value="4"/>
      <column name="educations" value="[]" />
      <column name="akdn_trainings" value="[]" />
      <column name="professional_trainings" value="[]" />
      <column name="skills" value="[]" />
      <column name="professional_memberships" value="[]" />
      <column name="language_proficiencies" value="[]" />
      <column name="voluntary_community_services" value="[]" />
      <column name="voluntary_public_services" value="[]" />
      <column name="willingness_to_devote_time_in_future" value="Change institution" />
      <column name="field_of_interest" value="[]" />
      <column name="hours_per_week" value="9" />
      <column name="plan_to_relocate" value="0" />
      <column name="occupation_type" value="2" />
      <column name="employments" value="[]" />
      <column name="field_of_expertise" value="Software Engineering" />
      <column name="religious_education" value="1" />
    </insert>
    <!--<insert tableName="person">-->
      <!--<column name="id" value="2"/>-->
      <!--<column name="cnic" value="42101-1111111-3"/>-->
      <!--<column name="first_name" value="Zeeshan"/>-->
      <!--<column name="fathers_name" value="Moiz"/>-->
      <!--<column name="family_name" value="Damani"/>-->
      <!--<column name="gender" value="1"/>-->
      <!--<column name="date_of_birth" value="1994-10-10"/>-->
      <!--<column name="marital_status" value="single"/>-->
      <!--<column name="residential_address" value="KA-3 102"/>-->
      <!--<column name="mobile_phone" value="03322359875"/>-->
      <!--<column name="email_address" value="zeshanmoizdamani@gmail.com"/>-->
      <!--<column name="area_of_origin" value="Karachi"/>-->
      <!--<column name="regional_council_id" value="2"/>-->
      <!--<column name="local_council_id" value="3"/>-->
      <!--<column name="jamatkhana_id" value="4"/>-->
      <!--<column name="image" value="42101-1111111-3.png" />-->
    <!--</insert>-->
  </changeSet>
  <changeSet id="02-04" author="mohsin.kerai">
    <createTable tableName="relation"
      remarks="A Person in the real world, i.e. Mohsin Kerai or Zeeshan Damani">
      <column name="id" type="bigint" autoIncrement="true">
        <constraints nullable="false" unique="true" primaryKey="true"/>
      </column>
      <column name="name" type="varchar(255)">
        <constraints nullable="false"/>
      </column>
      <column name="reverse_relation_id" type="bigint">
        <constraints nullable="true"/>
      </column>
      <column name="created_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="updated_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="created_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
      <column name="updated_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="02-06" author="mohsin.kerai">
    <createTable tableName="person_relation_person"
      remarks="A Person in the real world, i.e. Mohsin Kerai or Zeeshan Damani">
      <column name="id" type="bigint" autoIncrement="true">
        <constraints nullable="false" unique="true" primaryKey="true"/>
      </column>
      <column name="first_person_id" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="second_person_id" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="relation_id" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="created_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="updated_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="created_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
      <column name="updated_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
    </createTable>
  </changeSet>
  <!--<changeSet id="02-07" author="mohsin.kerai">-->
    <!--<insert tableName="person_relation_person">-->
      <!--<column name="first_person_id" value="1"/>-->
      <!--<column name="second_person_id" value="2"/>-->
      <!--<column name="relation_id" value="1"/>-->
    <!--</insert>-->
  <!--</changeSet>-->
  <changeSet id="02-08" author="mohsin.kerai">
    <createTable tableName="cycle_position_on_institution"
      remarks="A Triangular Table which connect Position to Cycle">
      <column name="id" type="bigint" autoIncrement="true">
        <constraints nullable="false" unique="true" primaryKey="true"/>
      </column>
      <column name="cycle_id" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="position_on_institution_id" type="bigint">
        <constraints nullable="false"/>
      </column>
      <column name="min_count" type="int">
        <constraints nullable="true"/>
      </column>
      <column name="desired" type="int">
        <constraints nullable="true"/>
      </column>
      <column name="max_count" type="int">
        <constraints nullable="true"/>
      </column>
      <column name="nominations" type="int">
        <constraints nullable="true"/>
      </column>
      <column name="created_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="updated_on" type="datetime" defaultValueComputed="CURRENT_TIMESTAMP">
        <constraints nullable="false" unique="false"/>
      </column>
      <column name="created_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
      <column name="updated_by" type="datetime" defaultValueComputed="null">
        <constraints nullable="true" unique="false"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="02-09" author="mohsin.kerai">
    <insert tableName="cycle_position_on_institution">
      <column name="id" value="1"/>
      <column name="cycle_id" value="1"/>
      <column name="position_on_institution_id" value="1"/>
      <column name="min_count" value="1"/>
      <column name="desired" value="1"/>
      <column name="max_count" value="1"/>
      <column name="nominations" value="3"/>
    </insert>
  </changeSet>
</databaseChangeLog>